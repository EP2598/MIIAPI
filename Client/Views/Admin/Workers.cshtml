@{
    ViewData["Title"] = "Worker Page";
    Layout = "AdminLayout";
}

<div class="toast" style="position: absolute; top: 70px; right: 0;" data-delay="6000">
    <div class="toast-header">
        <img src="~/img/logo.png" style="width:5px; height: 5px" class="rounded mr-2" alt="...">
        <strong class="mr-auto">Information</strong>
        <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div id="divToastBody" class="toast-body" style="background-color: #f5f5dc">

    </div>
</div>

@if (User.IsInRole("Manager") || User.IsInRole("Director"))
{ 
    <button type="button" class="btn btn-primary mb-2" data-toggle="modal" data-target="#modalForm">Add</button>    
}


<table id="tableGridWorkerList" class="table table-hover">
    <thead>
        <tr>
            <th>NIK</th>
            <th>Full Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Birthdate</th>
        </tr>
    </thead>
    <tbody id="GridWorkerList">
    </tbody>
    <tfoot>
        <tr>
            <th>NIK</th>
            <th>Full Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Birthdate</th>
        </tr>
    </tfoot>
</table>

<div class="modal fade" id="modalEmployee" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalEmployeeTitle">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div id="modalEmployeeBody" class="modal-body">
                <div id="cardDetailEmployee" class="card mb-2">
                    <div class="card-header" data-toggle="collapse" data-target="#innerDetailEmployee" aria-expanded="true">
                        Employee Details
                    </div>
                    <div id="innerDetailEmployee" class="card-body">
                        <form id="formEditEmployee" class="needs-validation" onsubmit="return true" novalidate>
                            <div>
                                <div class="form-row">
                                    <div class="col-md-4 mb-3">
                                        <label for="formFirstName">First name</label>
                                        <input type="text" class="form-control" readonly id="formFirstName">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="formLastName">Last name</label>
                                        <input type="text" class="form-control" readonly id="formLastName">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="formEmail">Email</label>
                                        <input type="email" class="form-control" id="formEmail" placeholder="someone@domain.com" required>
                                        <div id="invalidEmailUpdate" class="invalid-feedback">
                                            Please provide a valid Email.
                                        </div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="col-md-4 mb-3">
                                        <label for="formNIK">NIK</label>
                                        <input type="text" class="form-control" readonly id="formNIK">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="formSalary">Salary</label>
                                        <input type="text" class="form-control" id="formSalary" placeholder="500000000" required>
                                        <div class="invalid-feedback">
                                            Please provide a Salary.
                                        </div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="col-md-4 mb-3">
                                        <label for="formPhone">Phone Number</label>
                                        <input type="text" class="form-control" id="formPhone" placeholder="0858141233423" required>
                                        <div class="invalid-feedback">
                                            Please provide a phone number.
                                        </div>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="formDate">Birth Date</label>
                                        <input type="date" class="form-control" readonly id="formDate" required>
                                    </div>
                                    <div class="col-md-2 mb-3">
                                        <label for="formGender">Gender</label>
                                        <input type="text" class="form-control" id="formGender" readonly>
                                    </div>
                                </div>
                            </div>
                            <button class="btn btn-primary" type="button" onclick="updateEmployee()">Update data</button>
                        </form>
                    </div>
                </div>
                <div id="cardDetailEducation" class="card mb-2">
                    <div class="card-header" data-toggle="collapse" data-target="#innerDetailEducation" aria-expanded="true">
                        Education Details
                    </div>
                    <div id="innerDetailEducation" class="card-body">
                        <form id="formEditEducation" class="needs-validation" onsubmit="return true" novalidate>
                            <div>
                                <div class="form-row mt-2">
                                    <div class="col-md-4 mb-3">
                                        <label for="formUniversity">University</label>
                                        <select id="formUniversity" class="form-control" required>
                                            <option value=1>Universitas Pokemon</option>
                                            <option value=2>GachArena</option>
                                            <option value=3>Poke Institute</option>
                                        </select>
                                        <div class="invalid-feedback">
                                            Please choose a University.
                                        </div>
                                    </div>
                                    <div class="col-md-2 mb-3">
                                        <label for="formDegree">Degree</label>
                                        <select id="formDegree" class="form-control" required>
                                            <option value=0>D3</option>
                                            <option value=1>D4</option>
                                            <option value=2>S1</option>
                                            <option value=3>S2</option>
                                            <option value=4>S3</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2 mb-3">
                                        <label for="formGPA">GPA</label>
                                        <input type="text" class="form-control" id="formGPA" placeholder="3.80" required>
                                    </div>
                                </div>
                            </div>
                            <button class="btn btn-primary" type="button" onclick="updateEducation()">Update data</button>
                        </form>
                    </div>
                </div>
                <div id="cardDetailRoles" class="card mb-3">
                    <div class="card-header" data-toggle="collapse" data-target="#innerDetailRoles" aria-expanded="true">
                        Roles Assignment
                    </div>
                    <div id="innerDetailRoles" class="card-body">
                        <h2 id="innerDetailRolesPlaceholder"></h2>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" onclick="confirmDelete()">Delete</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modalForm" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalTitle">Insert New Employee</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div id="modalFormBody" class="modal-body">
                <form id="formRegisterEmployee" class="needs-validation" onsubmit="return true" novalidate>
                    <h3 id="headerEmployeeSection" data-toggle="collapse" data-target="#divEmployeeSection" aria-expanded="true"> [-] Employee Data</h3>
                    <div id="divEmployeeSection">
                        <div class="form-row">
                            <div class="col-md-4 mb-3">
                                <label for="validationCustom01">First name</label>
                                <input type="text" class="form-control" id="validationCustom01" placeholder="Mark" required>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="validationCustom02">Last name</label>
                                <input type="text" class="form-control" id="validationCustom02" placeholder="Otto" required>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="validationCustomUsername">Email</label>
                                <input type="text" class="form-control" id="validationCustomEmail" placeholder="someone@domain.com" required>
                                <div class="invalid-feedback">
                                    Please provide an Email.
                                </div>
                            </div>
                        </div>
                        <div class="form-row border-bottom">
                            <div class="col-md-4 mb-3">
                                <label for="validationCustom03">Phone Number</label>
                                <input type="text" class="form-control" id="validationCustom03" placeholder="0858141233423" required>
                                <div class="invalid-feedback">
                                    Please provide a phone number.
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="validationCustom04">Birth Date</label>
                                <input type="date" class="form-control" id="validationCustom04" required>
                                <div class="invalid-feedback">
                                    Please choose a valid date.
                                </div>
                            </div>
                            <div class="col-md-2 mb-3">
                                <label for="inputGender">Gender</label>
                                <select id="inputGender" class="form-control" required>
                                    <option value="Male" selected>Male</option>
                                    <option value="Female">Female</option>
                                </select>
                                <div class="invalid-feedback">
                                    Please choose a Gender.
                                </div>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                        </div>
                    </div>
                    <h3 id="headerEducationSection" data-toggle="collapse" data-target="#divEducationSection" aria-expanded="false"> [-] Education Data</h3>
                    <div id="divEducationSection">
                        <div id="divInnerEducation" class="form-education form-row mt-2">
                            <div class="col-md-4 mb-3">
                                <label for="inputUniversity">University</label>
                                <select id="inputUniversity" class="form-control" required>
                                    <option value="1" selected>Universitas Pokemon</option>
                                    <option value="2">GachArena</option>
                                    <option value="3">Poke Institute</option>
                                </select>
                                <div class="invalid-feedback">
                                    Please choose a University.
                                </div>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-2 mb-3">
                                <label for="inputDegree">Degree</label>
                                <select id="inputDegree" class="form-control" required>
                                    <option value="1" selected>D3</option>
                                    <option value="2">D4</option>
                                    <option value="3">S1</option>
                                    <option value="4">S2</option>
                                    <option value="5">S3</option>
                                </select>
                                <div class="invalid-feedback">
                                    Please choose a Degree.
                                </div>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-2 mb-3">
                                <label for="validationCustom05">GPA</label>
                                <input type="text" class="form-control" id="validationCustom05" placeholder="3.80" required>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-primary" type="button" onclick="registerEmployee()">Submit form</button>
                </form>
            </div>
        </div>
    </div>
</div>


<script>
    // Example starter JavaScript for disabling form submissions if there are invalid fields
    (function () {
        'use strict';
        window.addEventListener('load', function () {
            // Fetch all the forms we want to apply custom Bootstrap validation styles to
            var forms = document.getElementsByClassName('needs-validation');
            // Loop over them and prevent submission
            var validation = Array.prototype.filter.call(forms, function (form) {
                form.addEventListener('submit', function (event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();
</script>

@section CSS {
<link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
<link rel="stylesheet" href="~/css/site.css" />
<link href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="https://cdn.datatables.net/buttons/2.2.3/css/buttons.dataTables.min.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet" />
}

@section Scripts {
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="~/js/site.js" asp-append-version="true"></script>
<script src="~/js/Worker.js"></script>
@*<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>*@

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.0/jquery.validate.min.js"></script>
<script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/plug-ins/1.12.1/dataRender/datetime.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.2/moment.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.3/js/dataTables.buttons.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.print.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
}